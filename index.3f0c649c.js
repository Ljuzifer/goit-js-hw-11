Math.PI;const t=2*Math.PI,i={timeStamp:function(){return window.performance.now()},random:function(t,i){return t+Math.random()*(i-t)},map:function(t,i,e,s,h){return(t-i)/(e-i)*(h-s)+s},lerp:function(t,i,e){return t+(i-t)*e},clamp:function(t,i,e){return Math.max(i,Math.min(e,t))}};class e{constructor(t,i){this.x=t||0,this.y=i||0}set(t,i){this.x=t,this.y=i}reset(){this.x=0,this.y=0}fromAngle(t){let i=Math.cos(t),s=Math.sin(t);return new e(i,s)}add(t){this.x+=t.x,this.y+=t.y}sub(t){this.x-=t.x,this.y-=t.y}mult(t){this.x*=t,this.y*=t}div(t){this.x/=t,this.y/=t}dot(t){return t.x*this.x+t.y*this.y}limit(t){this.mag()>t&&this.setMag(t)}mag(){return Math.hypot(this.x,this.y)}setMag(t){this.mag()>0?this.normalize():(this.x=1,this.y=0),this.mult(t)}normalize(){let t=this.mag();t>0&&(this.x/=t,this.y/=t)}heading(){return Math.atan2(this.y,this.x)}setHeading(t){let i=this.mag();this.x=Math.cos(t)*i,this.y=Math.sin(t)*i}dist(t){return new e(this.x-t.x,this.y-t.y).mag()}angle(t){return Math.atan2(t.y-this.y,t.x-this.x)}copy(){return new e(this.x,this.y)}}let s=document.createElement("canvas"),h=s.getContext("2d"),o=s.height=window.innerHeight,a=s.width=window.innerWidth;document.body.appendChild(s);let n={x:a/2,y:o/2};s.onmousemove=function(t){n.x=t.clientX-s.offsetLeft,n.y=t.clientY-s.offsetTop},document.body.onresize=function(t){o=s.height=window.innerHeight,a=s.width=window.innerWidth};class l{constructor(s,h,o){this.position=new e(s,h),this.velocity=(new e).fromAngle(i.random(0,t)),this.acceleration=new e(0,0),this.target=o,this.travelled_distance=0,this.min_size=1,this.max_size=6,this.size=i.random(this.min_size,this.max_size),this.zone=4*this.size,this.topSpeed=i.map(this.size,this.min_size,this.max_size,40,10);let a=Math.floor(i.map(this.size,this.min_size,this.max_size,4,16));this.tail=[];for(let t=0;t<a;t++)this.tail.push({x:this.position.x,y:this.position.y});this.wiggle_speed=i.map(this.size,this.min_size,this.max_size,2,1.2),this.blink_offset=i.random(0,100),this.alpha=i.random(.1,1)}render(){this.update(),this.draw()}update(){let s=this.position.copy(),h=new e(this.target.x,this.target.y),o=this.position.angle(h),a=h.dist(this.position),n=(new e).fromAngle(o);n.setMag(i.map(i.clamp(a,0,400),0,400,0,.1*this.topSpeed)),this.addForce(n),this.velocity.add(this.acceleration),a<800?this.velocity.limit(i.map(i.clamp(a,0,800),0,800,.4*this.topSpeed,this.topSpeed)):this.velocity.limit(this.topSpeed),this.position.add(this.velocity),this.acceleration.mult(0),this.travelled_distance+=s.dist(this.position);let l=Math.sin(d*this.wiggle_speed)*i.map(this.velocity.mag(),0,this.topSpeed,0,this.size),r=this.velocity.heading()+Math.PI/2,p=this.position.x+Math.cos(r)*l,m=this.position.y+Math.sin(r)*l;this.travelled_distance=0;let c=this.tail.length-1,g=(new e).fromAngle(i.random(0,t));g.setMag(Math.random()*this.size);var y={x:p+g.x,y:m+g.y};this.tail.splice(c,1),this.tail.splice(0,0,y)}draw(){let s=i.map(this.velocity.mag(),0,this.topSpeed,.1,1),o="hsl("+360*Math.sin(.1*(d+this.blink_offset))+",50%,"+i.map(this.velocity.mag(),0,this.topSpeed,40,100)*this.alpha+"%)";h.globalAlpha=this.alpha,h.strokeStyle=o;for(let t=0;t<this.tail.length-1;t++){let e=this.tail[t],s=this.tail[t+1];h.lineWidth=i.map(t,0,this.tail.length-1,this.size,1),h.beginPath(),h.moveTo(e.x,e.y),h.lineTo(s.x,s.y),h.closePath(),h.stroke()}let a=140*s;var n=h.createRadialGradient(this.position.x,this.position.y,5,this.position.x,this.position.y,a);n.addColorStop(0,"rgba(255,255,255,0.01)"),n.addColorStop(.1,"rgba(255,120,200,0.02)"),n.addColorStop(.9,"rgba(255,255,120,0)"),n.addColorStop(1,"rgba(0,0,0,0)"),h.fillStyle=n,h.fillRect(this.position.x-a/2,this.position.y-a/2,a,a),h.globalAlpha=s+.2,h.fillStyle="white";for(let o=0;o<4;o++){let o=(new e).fromAngle(i.random(0,t));o.setMag(Math.random()*s*100),o.add(this.position),h.beginPath(),h.arc(o.x,o.y,Math.random(),0,t),h.fill()}}addForce(t){this.acceleration.add(t)}avoid(t){t.forEach((t=>{if(t!==this){let s=this.position.dist(t.position),h=this.zone+t.size;if(h-s>=0){let o=t.position.angle(this.position),a=(new e).fromAngle(o);a.setMag(i.map(s,0,h,2,0)),this.addForce(a)}}}))}}let r=[];for(let t=0;t<120;t++)r.push(new l(a/2,o/2,n));let d=0;h.strokeStyle="white",h.lineCap="round",h.lineJoin="round",function t(){h.fillStyle="black",h.globalCompositeOperation="source-over",h.globalAlpha=.2,h.fillRect(0,0,a,o),h.globalAlpha=1,h.globalCompositeOperation="lighter",r.forEach((t=>{t.avoid(r)})),r.forEach((t=>{t.render()})),d+=1,requestAnimationFrame(t)}();
//# sourceMappingURL=index.3f0c649c.js.map
